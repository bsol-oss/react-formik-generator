(self.webpackChunk_bsol_oss_react_formik_generator=self.webpackChunk_bsol_oss_react_formik_generator||[]).push([[179],{"./src/components/useFormGenerator/index.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultFormGenerator:()=>DefaultFormGenerator,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js"),chunk_6CSUKJP7=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-6CSUKJP7.mjs"),chunk_B22GDMVL=__webpack_require__("./node_modules/@chakra-ui/switch/dist/chunk-B22GDMVL.mjs"),chunk_QUJ23J4G=__webpack_require__("./node_modules/@chakra-ui/radio/dist/chunk-QUJ23J4G.mjs"),chunk_O5CRURSQ=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-O5CRURSQ.mjs"),chunk_FL4WJEVU=__webpack_require__("./node_modules/@chakra-ui/radio/dist/chunk-FL4WJEVU.mjs"),chunk_N22PRFAW=__webpack_require__("./node_modules/@chakra-ui/slider/dist/chunk-N22PRFAW.mjs"),dist=__webpack_require__("./node_modules/schema-to-yup/dist/index.js"),chunk_NAA7TEES=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-NAA7TEES.mjs"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const FormContainer=(0,emotion_styled_base_browser_esm.Z)("form",{target:"e1df64a12"})({name:"16dyfka",styles:"aligncontent:center;display:flex;flexdirection:column;justifycontent:center;marginbottom:2rem;textalign:right;fieldset{border:none;margin:0 auto;max-width:500px;padding:1rem 0;width:100%;}input{margin-left:1rem;width:40%;}"}),FieldContainer=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e1df64a11"})({name:"rohh5n",styles:"padding:0.2rem 0"}),ErrorContainer=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e1df64a10"})({name:"1kxg0i9",styles:"color:red;text-align:right"}),defaultWrappers_component={InputWrapper:({children})=>react.createElement(FieldContainer,null,children),InputFieldsContainer:({fields,onInputChange})=>react.createElement(react.Fragment,null,fields.map(((field,i)=>react.createElement(field.component,{key:i,name:field.name,value:field.value,onChange:onInputChange})))),ErrorWrapper:({children})=>react.createElement(ErrorContainer,null,children),FormWrapper:({formDataRef,setFormData=()=>{},yupSchema,onFormSubmit,inputFields,InputFieldsContainer,ErrorWrapper})=>{const[error,setError]=(0,react.useState)("");return react.createElement(FormContainer,{onSubmit:async e=>{e.preventDefault();try{await yupSchema.validate(formDataRef.current)}catch(e){return setError(e.message)}setError(""),onFormSubmit(e,formDataRef.current),console.log("Sample quotation form submitted!",formDataRef.current)}},react.createElement("fieldset",null,react.createElement(InputFieldsContainer,{fields:inputFields,onInputChange:(propName,val)=>{setFormData(propName,val)}}),error&&react.createElement(ErrorWrapper,null,error),react.createElement(chunk_NAA7TEES.z,{type:"submit",colorScheme:"yellow"},"Submit sample form")))}},defaultActions_util={onValueChange:()=>{},onFormSubmit:()=>{}};function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const inputGenerator_util=(name,value,schemaProp,schemaConfig,{Wrapper})=>({onChange})=>{const[val,setVal]=(0,react.useState)(value),typeAttr=function getInputTypeAttr(type){switch(type){case"integer":case"number":return"number";default:return"string"}}(schemaProp.type);let step;"number"===typeAttr&&(step=function getNumberInputStep(multipleOf){return multipleOf||1}(schemaProp.multipleOf));const otherInputProps={};step&&(otherInputProps.step=step);return react.createElement(Wrapper,null,react.createElement("label",{htmlFor:name},schemaProp.title),react.createElement("input",_extends({id:name,name,type:typeAttr,value:val,onChange:e=>{setVal(e.target.value),onChange(name,e.target.value)},placeholder:schemaProp.description||""},otherInputProps)))};function useFormGenerator_extends(){return useFormGenerator_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},useFormGenerator_extends.apply(this,arguments)}const components_useFormGenerator=(schema,config={},initialFormData={},wrappers=defaultWrappers_component,actions=defaultActions_util,components={})=>{const formDataRef=(0,react.useRef)(initialFormData),formData=formDataRef.current,setFormData=(prop,newVal)=>{formDataRef.current[prop]=newVal},yupSchema=(0,dist.cc)(schema,config),{properties:props}=schema,{privates=[]}=config,{_nodes:nodes}=yupSchema,inputFields=nodes.filter((propName=>privates.indexOf(propName)<0)).map((propName=>{const propValue=void 0!==formData[propName]?formData[propName]:void 0!==props[propName].default?props[propName].default:"";return{name:propName,value:propValue,component:components[propName]||inputGenerator_util(propName,propValue,props[propName],config,{Wrapper:wrappers.InputWrapper})}}));return{yupSchema,components:inputFields,Form:()=>react.createElement(wrappers.FormWrapper,useFormGenerator_extends({formDataRef,setFormData,yupSchema,inputFields,InputFieldsContainer:wrappers.InputFieldsContainer,ErrorWrapper:wrappers.ErrorWrapper},actions))}};var chunk_DGNA6VRZ=__webpack_require__("./node_modules/@chakra-ui/react/dist/chunk-DGNA6VRZ.mjs");const theme1=(0,__webpack_require__("./node_modules/@chakra-ui/theme-utils/dist/chunk-AQYX3YP4.mjs").B1)(Object.assign({},{breakpoints:{mobile:"480px",tablet:"768px",desktop:"1280px",desktopPlus:"1280px"},styles:{global:{"html, body":{fontFamily:"'roboto', 'Noto Sans TC', 'Noto Sans SC', sans-serif"}}}}));const index_stories={title:"FormGenerator"},DefaultFormGenerator=()=>{const[schema]=(0,react.useState)({$schema:"http://json-schema.org/draft-07/schema#",$id:"http://example.com/quotation.schema.json",title:"Quotation",description:"Quotation",type:"object",properties:{quote_date:{type:"string",title:"Quotation date",description:"Quotation Date",required:!0},rep:{type:"integer",title:"Rep",description:"ID of sales staff (auth_user)",required:!0},cusID:{type:"integer",title:"Customer ID",description:"ID of customer (Partymaster)",required:!0},status:{type:"integer",enum:[1,2],title:"Status",description:"ID of status",required:!0},is_obsolete:{type:"boolean",title:"Obsolete",description:"Is it obsolete?",required:!0},created_by:{type:"integer",exclusiveMinimum:0,description:"ID of user"},modified_by:{type:"integer",exclusiveMinimum:0,private:!0,description:"ID of user"}},required:["quote_date","rep","cusID","billing_address","shipping_address","total_amt","status"]}),data={cusID:"100",quote_date:new Date,is_obsolete:!0,status:1,rep:50},sampleQuotation=components_useFormGenerator(schema,{errMessages:{quote_date:{required:"Quote date is missing",format:"Not a valid date"},rep:{required:"Rep is missing"},cusID:{required:"cusID is missing"},billing_address:{required:"Billing address is missing"},shipping_address:{required:"Shipping address is missing"},total_amt:{required:"Total amount is missing"},status:{required:"Status is missing"},email:{required:"You must enter an email address",format:"Not a valid email address"}},privates:["created_by","modified_by"]},data,void 0,void 0,{is_obsolete:({name,value,onChange})=>{const[val,setVal]=(0,react.useState)(value);return react.createElement(chunk_6CSUKJP7.xu,{paddingBottom:"1rem"},react.createElement("h3",null,"Is obsolete"),react.createElement(chunk_B22GDMVL.r,{size:"lg",isChecked:!!val,onChange:()=>{setVal(!val),onChange(name,!val)}}))},status:({name,value,onChange})=>{const[val,setVal]=(0,react.useState)(value);return react.createElement(chunk_6CSUKJP7.xu,{paddingBottom:"1rem"},react.createElement("h3",null,"Status"),react.createElement(chunk_QUJ23J4G.E,{value:val,onChange:newVal=>{setVal(+newVal),onChange(name,+newVal)}},react.createElement(chunk_O5CRURSQ.K,{direction:"row"},react.createElement(chunk_FL4WJEVU.Y,{value:1},"Status 1"),react.createElement(chunk_FL4WJEVU.Y,{value:2},"Status 2"))))},rep:({name,value,onChange})=>{const[val,setVal]=(0,react.useState)(value);return react.createElement(chunk_6CSUKJP7.xu,{paddingBottom:"1rem"},react.createElement("h3",null,"Rep"),react.createElement(chunk_N22PRFAW.iR,{"aria-label":"slider-ex-5",name,value:val,min:1,max:60,step:1,onChange:v=>{setVal(v),onChange(name,v)}},react.createElement(chunk_N22PRFAW.Uj,null,react.createElement(chunk_N22PRFAW.Ms,null)),react.createElement(chunk_N22PRFAW.gs,null)))}});return react.createElement("div",{className:"App"},react.createElement(chunk_DGNA6VRZ.x,{theme:theme1},react.createElement("h2",{align:"center"},"React Formik Generator"),sampleQuotation.Form&&react.createElement(sampleQuotation.Form,null)))};DefaultFormGenerator.parameters={storySource:{source:"() => {\n    const [schema] = useState({\n        $schema: 'http://json-schema.org/draft-07/schema#',\n        $id: 'http://example.com/quotation.schema.json',\n        title: 'Quotation',\n        description: 'Quotation',\n        type: 'object',\n        properties: {\n            quote_date: {\n                type: 'string',\n                // format: 'date',\n                title: 'Quotation date',\n                description: 'Quotation Date',\n                required: true,\n            },\n            rep: {\n                type: 'integer',\n                // exclusiveMinimum: 0,\n                title: 'Rep',\n                description: 'ID of sales staff (auth_user)',\n                required: true,\n            },\n            cusID: {\n                type: 'integer',\n                // exclusiveMinimum: 0,\n                title: 'Customer ID',\n                description: 'ID of customer (Partymaster)',\n                required: true,\n            },\n            status: {\n                type: 'integer',\n                enum: [1, 2],\n                // enum_titles: [\"New\", \"Pending\"],\n                // exclusiveMinimum: 0,\n                title: 'Status',\n                description: 'ID of status',\n                required: true,\n            },\n            is_obsolete: {\n                type: 'boolean',\n                title: 'Obsolete',\n                description: 'Is it obsolete?',\n                required: true,\n            },\n            created_by: {\n                type: 'integer',\n                exclusiveMinimum: 0,\n                description: 'ID of user',\n            },\n            modified_by: {\n                type: 'integer',\n                exclusiveMinimum: 0,\n                private: true,\n                description: 'ID of user',\n            },\n        },\n        required: [\n            'quote_date',\n            'rep',\n            'cusID',\n            'billing_address',\n            'shipping_address',\n            'total_amt',\n            'status',\n        ],\n    })\n\n    const data = {\n        cusID: '100',\n        quote_date: new Date(),\n        is_obsolete: true,\n        status: 1,\n        rep: 50,\n    }\n\n    // const mockACData = [\n    //     { id: '1', value: '1' },\n    //     { id: '2', value: '2' },\n    //     { id: '100', value: '100' },\n    //     { id: '200', value: '200' },\n    //     { id: '300', value: '300' },\n    // ]\n\n    // const CusIDComp = ({ name, value, onChange }) => {\n    //     let existingItem = mockACData.find((it) => it.value === value)\n    //     if (!existingItem) existingItem = {}\n\n    //     const [item, setItem] = useState(existingItem)\n\n    //     return (\n    //         <Box paddingBottom=\"1rem\">\n    //             <h3>CusID</h3>\n    //             <Autocomplete\n    //                 data={mockACData}\n    //                 value={item}\n    //                 placeholder={'Name'}\n    //                 itemDisplay={(v) => {\n    //                     return v.value\n    //                 }}\n    //                 dataDescriptor={{\n    //                     id: 'id',\n    //                     field: ['value'],\n    //                 }}\n    //                 onSelect={(v) => {\n    //                     const newItem = v ? v : {}\n\n    //                     setItem(newItem)\n    //                     onChange(name, newItem.value || '')\n    //                 }}\n    //             />\n    //         </Box>\n    //     )\n    // }\n\n    // const QuoteDateComp = ({ name, value, onChange }) => {\n    //     const [val, setVal] = useState(value)\n\n    //     return (\n    //         <Box paddingBottom=\"1rem\">\n    //             <h3>Quote Date</h3>\n    //             <DateTimePicker\n    //                 date={val}\n    //                 changeDate={(v) => {\n    //                     setVal(v)\n    //                     onChange('quote_date', v)\n    //                 }}\n    //             />\n    //         </Box>\n    //     )\n    // }\n\n    const IsObsoleteComp = ({ name, value, onChange }) => {\n        const [val, setVal] = useState(value)\n\n        return (\n            <Box paddingBottom=\"1rem\">\n                <h3>Is obsolete</h3>\n                <Switch\n                    size=\"lg\"\n                    isChecked={!!val}\n                    onChange={() => {\n                        setVal(!val)\n                        onChange(name, !val)\n                    }}\n                />\n            </Box>\n        )\n    }\n\n    const StatusComp = ({ name, value, onChange }) => {\n        const [val, setVal] = useState(value)\n\n        return (\n            <Box paddingBottom=\"1rem\">\n                <h3>Status</h3>\n                <RadioGroup\n                    value={val}\n                    onChange={(newVal) => {\n                        setVal(+newVal)\n                        onChange(name, +newVal)\n                    }}\n                >\n                    <Stack direction=\"row\">\n                        <Radio value={1}>Status 1</Radio>\n                        <Radio value={2}>Status 2</Radio>\n                    </Stack>\n                </RadioGroup>\n            </Box>\n        )\n    }\n\n    const RepComp = ({ name, value, onChange }) => {\n        const [val, setVal] = useState(value)\n\n        return (\n            <Box paddingBottom=\"1rem\">\n                <h3>Rep</h3>\n                <Slider\n                    aria-label=\"slider-ex-5\"\n                    name={name}\n                    value={val}\n                    min={1}\n                    max={60}\n                    step={1}\n                    onChange={(v) => {\n                        setVal(v)\n                        onChange(name, v)\n                    }}\n                >\n                    <SliderTrack>\n                        <SliderFilledTrack />\n                    </SliderTrack>\n                    <SliderThumb />\n                </Slider>\n            </Box>\n        )\n    }\n\n    const sampleQuotation = useFormGenerator(\n        schema,\n        {\n            errMessages: {\n                quote_date: {\n                    required: 'Quote date is missing',\n                    format: 'Not a valid date',\n                },\n                rep: {\n                    required: 'Rep is missing',\n                },\n                cusID: {\n                    required: 'cusID is missing',\n                },\n                billing_address: {\n                    required: 'Billing address is missing',\n                },\n                shipping_address: {\n                    required: 'Shipping address is missing',\n                },\n                total_amt: {\n                    required: 'Total amount is missing',\n                },\n                status: {\n                    required: 'Status is missing',\n                },\n                email: {\n                    required: 'You must enter an email address',\n                    format: 'Not a valid email address',\n                },\n            },\n            privates: ['created_by', 'modified_by'],\n        },\n        data,\n        undefined,\n        undefined,\n        {\n            // cusID: CusIDComp,\n            // quote_date: QuoteDateComp,\n            is_obsolete: IsObsoleteComp,\n            status: StatusComp,\n            rep: RepComp,\n        }\n    )\n\n    return (\n        <div className=\"App\">\n            <ChakraProvider theme={theme1}>\n                <h2 align=\"center\">React Formik Generator</h2>\n                {sampleQuotation.Form && <sampleQuotation.Form />}\n            </ChakraProvider>\n        </div>\n    )\n}"},...DefaultFormGenerator.parameters};const __namedExportsOrder=["DefaultFormGenerator"];DefaultFormGenerator.__docgenInfo={description:"",methods:[],displayName:"DefaultFormGenerator"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/useFormGenerator/index.stories.js"]={name:"DefaultFormGenerator",docgenInfo:DefaultFormGenerator.__docgenInfo,path:"src/components/useFormGenerator/index.stories.js"})},"./storybook-init-framework-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./components/useFormGenerator/index.stories.js":"./src/components/useFormGenerator/index.stories.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$",module.exports=webpackEmptyContext},"?4f7e":()=>{},"./generated-stories-entry.cjs":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],module,!1)}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[49],(()=>(__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs"))));__webpack_require__.O()}]);